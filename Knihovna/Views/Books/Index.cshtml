    @using Knihovna.DTO
    @model IEnumerable< BookDto>
<!-- Main Container -->
<div class="container mt-5">
	<!-- Book List -->
	<h2>Seznam knih</h2>

	<div>
		<a asp-action="Create" class="btn btn-success">Přidat knihu</a>
	</div>
	<div class="container mt-5">
		<h4>Vyhledávání knih</h4>
		<form method="get">
			<div class="d-flex flex-row align-self-center mb-3">
				<div class="form-group mx-sm-3 mb-2">
					<label for="Title">Titul</label>
					<input type="text" class="form-control" id="Title" name="Title" placeholder="Zadejte titul knihy">
				</div>
				<div class="form-group mx-sm-3 mb-2">
					<label for="AuthorName">Autor</label>
					<input type="text" class="form-control" id="AuthorName" name="AuthorName" placeholder="Zadejte jméno autora">
				</div>				
				<div class="form-group mx-sm-3 mb-2">
					<label for="Genre">Žánr</label>
					<input type="text" class="form-control" id="Genre" name="Genre" placeholder="Zadejte žánr">
				</div>				
				<div class="form-group mx-sm-3 mb-2">
					<label for="Year">Rok</label>
					<input type="text" class="form-control" id="Year" name="Year" placeholder="Zadejte rok">
				</div>				
				<div class="form-group mx-sm-3 mb-2">
					<label for="ISBN">ISBN</label>
					<input type="text" class="form-control" id="ISBN" name="ISBN" placeholder="Zadejte ISBN">
				</div>
				<div class="form-group  mx-sm-3 mb-2 align-self-end">
					<button type="submit" class="btn btn-primary">Vyhledat</button>
				</div>
			</div>
		</form>
	</div>
	@foreach (var book in Model)
	{
		<table class="table table-bordered table-striped ">
			<thead>
				<tr>
					@if (book.Borrowed && Convert.ToDateTime(book.DateOfReturn) < DateTime.Now)
					{
						<td colspan="5" style="background-color:red;"></td>
					}
					else
					{
						<td colspan="5" style="background-color: lightcyan;"></td>
					}

				</tr>
				<tr>
					<th>Titul</th>
					<th>Autor</th>
					<th>Žánr</th>
					<th>Rok</th>
					<th>ISBN</th>

				</tr>
			</thead>
			<tbody>
				<tr>
					<td>@book.Title</td>
					<td>@book.AuthorName</td>
					<td>@book.Genre</td>
					<td>@book.Year</td>
					<td>@book.ISBN</td>

				</tr>
				<tr>
					<th colspan="5">Popis</th>
				</tr>
				<tr>
					<td colspan="5">@book.Description</td>
				</tr>
				<tr>
					 
						@if (book.Reserved)
						{
						<td>
							<form method="post" class="form-inline">
								<button type="submit" asp-route-id="@book.Id" asp-action="RezervationCancel" class="btn btn-danger btn-sm">Zrušit rezervaci</button>
							</form>
							<span>Rezervováno</span><br />
							@* <span>@book.UserWhoReservedId</span><br /> *@
							<span>@book.UserWhoReservedName</span><br />
							<span>@book.UserWhoReservedEmail</span><br />
						</td>
						}
						else
						{
						<td>
							<form method="post" class="form-inline">
								<button type="submit" asp-route-id="@book.Id" asp-action="Rezervation" class="btn btn-danger btn-sm">Rezervovat knihu</button>
							</form>
						</td>
						}
						@if (book.Borrowed)
						{

						<td>
							<form method="post" class="form-inline">
								<button type="submit" asp-route-id="@book.Id" asp-action="BorrowCancel" class="btn btn-danger btn-sm">Vrátit knihu</button>
							</form>
								@if (Convert.ToDateTime(book.DateOfReturn) > DateTime.Now)
								{
								<span>Půjčeno do </span>
								<span>@book.DateOfReturn</span>
								<br />
								}
								else
								{
								<span>Půjčeno do </span>
								<span>@book.DateOfReturn</span>
								<span style="color: red;"> UPOMÍNKA !!!</span>
								<br />
								}
							<span>@book.UserWhoBorrowedName</span><br />
							<span>@book.UserWhoBorrowedEmail</span><br />
						</td>
						}
						else
						{
						<td>
							<form method="post" class="form-inline">
								<button type="submit" asp-route-id="@book.Id" asp-action="Borrow" class="btn btn-danger btn-sm">Půjčit knihu</button>
							</form>
						</td>
						}
					<td><a class="btn btn-primary btn-sm" asp-action="Edit" asp-route-id="@book.Id">Editovat</a></td>
					<td>
						<form method="post" class="form-inline">
							<button type="submit" asp-route-id="@book.Id" asp-action="Delete" class="btn btn-danger btn-sm">Smazat</button>
						</form>
					</td>
					 
				</tr>
			</tbody>
		</table>
	}

